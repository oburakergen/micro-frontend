import{k as e,u as t,o as a,cr as l,j as r,w as s,F as o,C as i,B as n,c as d,M as m,S as c,d as u,T as g,v as p,l as y}from"./common-DEUjWhYV.js";import{t as b}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{D as x}from"./index.modern-DlizPJF-.js";/* empty css              */import{A as h}from"./allergy-intolerance-api-BJKp79-f.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";import"./index.modern-BcxX8faq.js";import"./Overlay-CK6O43qj.js";const S=d=>{const{ViewID:m,phrId:c,setReLoadList:u,setModal:g}=d,{setPageLoading:p}=b.useContext(e),{t:y}=t(),{register:x,handleSubmit:S,formState:{errors:j},control:C,setValue:f}=a(),v=[{label:y("filter.food"),value:"FOOD"},{label:y("filter.medication"),value:"MEDICATION"},{label:y("filter.other"),value:"OTHER"}];x("allergyName",{validate:{notEmpty:e=>!l(e)||y("validation-error-mesaj")}}),x("note",{validate:{notEmpty:e=>!l(e)||y("validation-error-mesaj")}});const N=[{visibilityState:!0,ColLg:"12",item:"SELECT",itemType:"single",label:y("allergy-reaction.label-category"),labelStatus:!0,name:"category",id:"category",className:null,clearItem:!1,rowFixed:!1,IsMulti:!1,options:v,closeMenuOnSelect:!0,defaultValue:m?v.filter(e=>e.value===m?.category)[0]:null,onChange:void 0,placeholder:y("allergy-reaction.label-category"),required:!0,requiredMessage:y("validation-error-mesaj"),disabled:!1},{visibilityState:!0,ColLg:"12",item:"INPUT",itemType:"text",label:y("allergy.name"),labelStatus:!0,name:"allergyName",id:"allergyName",className:null,rowFixed:!1,defaultValue:m?.name,placeholder:y("allergy.name"),required:!0,requiredType:{required:y("validation-error-mesaj")},disabled:!1,maxLength:250,autoComplete:"off"},{visibilityState:!0,ColLg:"12",item:"INPUT",itemType:"textarea",label:y("allergy-reaction.label-note"),labelStatus:!0,name:"note",id:"note",className:null,rowFixed:!1,defaultValue:m?.note,placeholder:y("allergy-reaction.label-note"),required:!0,requiredType:{required:y("validation-error-mesaj")},disabled:!1,maxLength:250,autoComplete:"off"}];return r.jsxs(s,{onSubmit:S(e=>{p(!0);const t={category:e.category.value,name:e.allergyName,note:e.note};m?(t.allergyId=m?.id,h.allergyUpdate(t,e=>{e&&(g(!1),u(!0)),p(!1)})):(t.patientId=c,h.allergyAdd(t,e=>{e&&(g(!1),u(!0)),p(!1)}))}),autoComplete:"off",children:[r.jsx(o,{CreateFormItems:N,register:x,setValue:f,errors:j,control:C}),r.jsxs(i,{xs:12,justify:"end",className:"mt-3",children:[r.jsx(n,{id:"CancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>g(!1),children:y("button.cancel")}),r.jsx(n,{id:"allergyBtn",variant:"success",size:"sm",type:"submit",children:y("button.save")})]})]})},j=()=>{const[e,a]=b.useState(null),[l,s]=b.useState([]),[o,i]=b.useState([]),[n,j]=b.useState(!1),[C,f]=b.useState(null),[v,N]=b.useState(!1),[I,D]=b.useState({page:1,size:10}),T=d(e=>e.roleManageStore.PatientPhysical),[L,_]=b.useState({Id:"",Name:""}),{t:F}=t(),[w,P]=b.useState(!1),B=e=>{f("add"),N(!0),a(e)};let M;"add"===C&&(M=r.jsx(m,{modal:v,modaltitleText:F("allergy-reaction.add-allergy-title"),modalWidth:"35%",alignment:"top",toggle:()=>N(!1),component:r.jsx(S,{phrId:T?.phrId,ViewID:e,setReLoadList:P,setModal:N})}));const O={DataApi:h,DataGet:"getOtherList",DataDelete:"remove",DataGetParams:void 0,pageSizeCustom:10,pageStartIndex:I,setPageStartIndex:D,DataState:l,DataSetState:s,CustomPagination:!0,DataContentState:o,DataContentSetState:i,deleteMessage:`${F("data-table-list.delete-message-text")} "${L?.Name}" ${F("data-table-list.delete-message-text-two")}`,modalType:C,setModalType:f,modal:v,setModal:N,SearchBox:!1,deleteIDName:L,TableKeyField:"id",defaultSortField:"createdDate",defaultSortOrder:"desc",filterSearchInput:!1,newButton:!0,newButtonName:F("button.add"),newButtonID:"NewButtonID",newButtonColor:"falcon-default",newPermissionType:"create",cardClass:"CardCreate border-0 CardHeaderNone",newButtonFunction:()=>B(null),deleteComponent:null,detailComponent:null,detailColumnName:null,filterComponent:null,FilterSelectState:n,FilterSelectSetState:j,cardLight:!1,cardTitle:"",PermissionPage:"menu.allergies",filterButton:!1,TableColumns:[{dataField:"category",text:F("allergy-reaction.label-category"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!0,formatter:e=>r.jsx(b.Fragment,{children:` ${e}`})},{dataField:"name",text:F("allergy.name"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!0,formatter:e=>c(e)},{dataField:"note",text:F("allergy-reaction.label-note"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1,formatter:e=>c(e)},{dataField:"",text:F("DataTable.actions"),classes:"border-0 align-middle IconCol",headerClasses:"border-0",sort:!1,formatter:(e,t)=>r.jsxs(b.Fragment,{children:[r.jsx(u,{resourceName:"menu.allergies",permission:"create",type:"button",children:r.jsx(g,{label:F("button.edit"),position:"top",children:r.jsx("i",{className:"ico-pencil-edit mr-2 cursor",onClick:()=>B(t)})})}),r.jsx(u,{resourceName:"menu.allergies",permission:"create",type:"button",children:r.jsx(g,{label:F("button.delete"),position:"top",children:r.jsx("i",{className:"ico-trash-delete cursor",onClick:()=>{return e=t.name,a=t.id,f("delete"),N(!0),void _({Id:a,Name:e});var e,a}})})})]})}]};return r.jsx(p,{cardClass:"CardHeaderNone other-allergy-list-card",cardLight:!1,cardTitle:null,cardContent:r.jsxs("div",{className:"SearchBox",children:[r.jsx(y,{alertType:"info",alertText:r.jsxs("p",{className:"mb-0 marginRight20",children:[r.jsx("i",{className:"ico-info"})," ",` ${F("allergy.other-alert-text")}`," "]})}),T&&r.jsxs(b.Fragment,{children:[M,r.jsx(x,{ReLoadList:w,setReLoadList:P,DynamicDataListItem:O})]})]})})};export{j as default};
