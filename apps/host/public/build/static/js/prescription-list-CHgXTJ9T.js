import{h as e,i,c as t,u as s,S as a,g as r,j as n,v as l,l as d}from"./common-DEUjWhYV.js";import{t as o}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{D as c}from"./index.modern-DaA0Mkma.js";import{T as p}from"./Table-BjqSWWQP.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";import"./index.modern-BcxX8faq.js";import"./Overlay-CK6O43qj.js";const m=new class extends e{constructor(){super(`${i.API}/phr`)}getPrescriptionList(e,i){super.get(`medication/get-prescription-list?masterPatientId=${e}&sortAsc=false`,i)}getDetails(e,i,t){super.get(`medication/get-prescription-detail?prescriptionNumber=${e}&masterPatientId=${i}`,t)}},x=()=>{const e=t(e=>e.roleManageStore.PatientPhysical),{t:i,i18n:x}=s(),[h,u]=o.useState(!1),[g,j]=o.useState(null),[D,b]=o.useState([]),[f,M]=o.useState(!1),[N,C]=o.useState([]),[L,S]=o.useState([]);o.useEffect(()=>{C([]),S([]),Y()},[x?.language]);const Y=()=>{m.getPrescriptionList(e?.masterPatientId,e=>{if(e){let i=[];e?.content?.map((e,t)=>{i.push({...e,id:t})}),C(i),S(i)}else C([]),S([])})},_={DataApi:m,DataGet:void 0,DataGetParams:void 0,DataState:N,DataSetState:C,DataContentState:L,DataContentSetState:S,CustomPagination:!0,modalType:g,setModalType:j,modal:f,setModal:M,defaultSortField:"prescriptionDate",defaultSortOrder:"desc",TableKeyField:"id",deleteComponent:null,detailComponent:null,detailColumnName:null,CardClass:"DataHeaderNoneCard border0 prescriptionListHeader",cardLight:!1,cardTitle:i("medication.medication-list"),excelButton:!1,TableExpandRow:{parentClassName:"expandActive",nonExpandable:[],showExpandColumn:!0,onlyOneExpanding:!0,expandHeaderColumnRenderer:({isAnyExpands:e})=>n.jsx("div",{onClick:e=>{e.stopPropagation()},style:{height:"33px"},children:n.jsx("span",{className:"visually-hidden",children:"expandRow"})}),expandColumnRenderer:({expanded:e})=>e?n.jsx("i",{className:"ico-minimize-2 cursor"}):n.jsx("i",{className:"ico-plus-1 cursor"}),onExpand:(i,t)=>{var s;t&&(s=i.prescriptionNumber,m.getDetails(s,e?.masterPatientId,e=>{b(e&&e)}))},renderer:e=>n.jsx("div",{className:"detail-content",children:n.jsx("ul",{children:n.jsxs("li",{children:[n.jsx("div",{className:"detail"}),n.jsx("div",{className:"detail detail-main",children:n.jsxs("fieldset",{children:[n.jsx("legend",{children:n.jsxs("span",{className:"label label-primary",children:[n.jsx("i",{className:"ico-medicine-2"})," "+i("medication.prescription-drug-information")]})}),n.jsx("div",{children:n.jsxs(p,{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:i("medication.label-medication-name")}),n.jsx("th",{children:i("medication.label-medication-instructions")}),n.jsx("th",{children:i("medication.label-remaining-refills")}),n.jsx("th",{children:i("medication.label-medication-start-date")}),n.jsx("th",{children:i("medication.label-medication-end-date")}),n.jsx("th",{children:i("medication.label-status")}),n.jsx("th",{children:i("medication.label-practitioners-notes")})]})}),n.jsx("tbody",{children:D?.map((e,i)=>n.jsxs("tr",{children:[n.jsx("td",{children:e?.isMultipleDosage?n.jsxs("span",{children:[n.jsx("span",{children:a(e?.drugGenericName)}),n.jsx("span",{style:{opacity:.5},children:" - (Multiple Dosage)"})]}):n.jsx("span",{children:a(e?.drugGenericName)})}),n.jsx("td",{children:e?.isMultipleDosage?e?.prescriptionDrugDosageList?.map((e,i)=>n.jsx("p",{children:e.instruction},i)):a(e?.prescriptionDrugDosageList[0]?.instruction)}),n.jsx("td",{children:n.jsx("td",{children:e?.isMultipleDosage?e?.prescriptionDrugDosageList?.map((i,t)=>n.jsx("p",{children:null!=e.remainingRefill?e.remainingRefill:"NA"},t)):n.jsx("span",{children:null!=e?.remainingRefill?e?.remainingRefill:"NA"})})}),n.jsx("td",{children:e?.isMultipleDosage?e?.prescriptionDrugDosageList?.map((e,i)=>n.jsx("p",{children:r(e?.startDate,"DD/MMM/YYYY")},i)):r(e?.prescriptionDrugDosageList[0]?.startDate,"DD/MMM/YYYY")}),n.jsx("td",{children:e?.isMultipleDosage?e?.prescriptionDrugDosageList?.map((e,i)=>n.jsx("p",{children:r(e?.endDate,"DD/MMM/YYYY")},i)):r(e?.prescriptionDrugDosageList[0]?.endDate,"DD/MMM/YYYY")}),n.jsx("td",{className:"text-transform-capitalize",children:e?.isMultipleDosage?e?.prescriptionDrugDosageList?.map((i,t)=>n.jsx("p",{children:a(e?.status).toLowerCase()},t)):n.jsx("span",{children:a(e?.status).toLowerCase()})}),n.jsx("td",{children:e?.isMultipleDosage?e?.prescriptionDrugDosageList?.map((e,i)=>n.jsx("p",{children:a(e?.specialInstruction)},i)):n.jsx("span",{children:a(e?.specialInstruction)})})]},i))})]})})]})})]})})})},TableColumns:[{dataField:"prescriptionNumber",text:i("prescription.label-prescription-number"),classes:"border-0 align-middle fs-0",headerClasses:"border-0",sort:!1,formatter:e=>a(e)},{text:i("prescription.label-prescribing-organization"),dataField:"organizationName",classes:"border-0 align-middle fs-0",headerClasses:"border-0",sort:!1,formatter:e=>a(e)},{text:i("prescription.label-prescription-date"),dataField:"prescriptionDate",classes:"border-0 align-middle fs-0",headerClasses:"border-0",sort:!1,formatter:e=>r(e,"DD/MMM/YYYY")},{text:i("prescription.label-colection-status"),dataField:"prescriptionStatus",classes:"border-0 align-middle fs-0",headerClasses:"border-0",sort:!1,formatter:e=>i(e)}]};return n.jsx(l,{cardClass:"DataHeaderNone",cardLight:!1,cardTitle:i("diagnostic-reports.panel-name"),cardContent:n.jsxs(o.Fragment,{children:[n.jsx("div",{className:"topAlert",children:n.jsx(d,{alertType:"info",alertText:n.jsxs("p",{className:"mb-0 marginRight20",children:[n.jsx("i",{className:"ico-info"})," "," "+i("prescription.prescription-info")," "]})})}),e&&n.jsx(c,{ReLoadList:h,setReLoadList:u,StaticDataListItem:_})]})})};export{x as default};
