import{c as e,u as t,j as a,v as n,R as i,C as s,g as r,k as o,o as l,m as c,n as d,M as m,w as h,F as u,B as p,S as x,x as g,d as j,T as f,l as b,q as N,I as C,y as v,z as y,D as S,E as T,a as P,G as I,H as k,N as E,J as w}from"./common-DEUjWhYV.js";import{t as D}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{T as _}from"./Table-BjqSWWQP.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";const z=()=>{const o=e(e=>e.roleManageStore.PatientPhysical),[l,c]=D.useState("en"),{t:d,i18n:m}=t();return D.useEffect(()=>{c(localStorage.getItem("locale"))},[localStorage.getItem("locale")]),a.jsx(n,{cardClass:"DataHeaderNone profileInfoCard",cardLight:!1,cardTitle:d("diagnostic-reports.panel-name"),cardContent:a.jsx(i,{children:a.jsx(s,{lg:12,children:a.jsxs(i,{className:"InformationCard ",children:[a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:d("patient-record.personal-information.first-name")}),"ar"===m.language&&null!==o?.arabicGivenName?o?.arabicGivenName:o?.given]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:d("patient-record.personal-information.middle-name")}),"ar"===m.language&&null!==o?.arabicMiddleName?o?.arabicMiddleName:o?.middleName]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:d("patient-record.personal-information.last-name")}),"ar"===m.language&&null!==o?.arabicFamilyName?o?.arabicFamilyName:o?.family]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:d("patient-record.personal-information.date-of-birth")}),r(o?.birthDate,"DD/MMM/YYYY")]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:d("patient-record.personal-information.gender")}),o?.gender]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:d("patient-record.personal-information.nationality")}),o?.nationality]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:d("patient-record.personal-information.blood-group")}),o?.bloodGroup]})})]})})})})},F=()=>{const[i,r]=D.useState(null),[N,C]=D.useState([]),[v,y]=D.useState(null),[S,T]=D.useState(!1),{setPageLoading:P}=D.useContext(o),{handleSubmit:I,register:k,formState:{errors:E},control:w,setValue:z,setError:F,clearErrors:M}=l(),{t:A}=t(),L=e(e=>e.roleManageStore.PatientPhysical);D.useEffect(()=>{L&&B(L.phrId)},[L]);const B=()=>{let e=[];c.emergencyContactList(t=>{t&&(t.sort((e,t)=>new Date(e.createdDate)-new Date(t.createdDate)).map(t=>{e.push({createdDate:t.createdDate,familyName:t.familyName,givenName:t.givenName,id:t.id,isPrimary:t.isPrimary,phoneNumber:t.phoneNumber,relationship:{value:t.relationship,label:d(t.relationship)},userInformationId:t.userInformationId||null})}),C(e)),r(null)})},R=(e,t)=>{"create"==e?(y("create"),r(t)):"delete"==e?(y("delete"),r(t)):"edit"==e&&(y("create"),r(t)),T(!0),M()},q=[{visibilityState:!0,ColLg:"6",item:"SELECT",itemType:"single",label:A("patient-record.contact-information.relationship"),labelStatus:!0,name:"relationship",id:"relationship",className:null,rowFixed:!1,IsMulti:!1,onChange:void 0,clearItem:!i?.relationship?.value,options:[{value:"RELATIVE",label:"Relative"},{value:"OTHER",label:"Other"}],closeMenuOnSelect:!0,defaultValue:i?.relationship?.value?i.relationship:null,placeholder:A("patient-record.contact-information.relationship"),required:!0,requiredMessage:A("validation-error-mesaj"),disabled:!1},{visibilityState:!0,ColLg:"6",item:"INPUT",itemType:"text",label:A("patient-record.contact-information.given-name"),labelStatus:!0,name:"givenName",id:"givenName",className:null,onChange:void 0,rowFixed:!1,readOnly:!1,defaultValue:i?.givenName,placeholder:A("patient-record.contact-information.given-name"),required:!0,requiredType:{required:A("validation-error-mesaj")},disabled:!1,autoComplete:"off"},{visibilityState:!0,ColLg:"6",item:"INPUT",itemType:"text",label:A("patient-record.contact-information.family-name"),labelStatus:!0,name:"familyName",id:"familyName",className:null,onChange:void 0,rowFixed:!1,readOnly:!1,defaultValue:i?.familyName,placeholder:A("patient-record.contact-information.family-name"),required:!0,requiredType:{required:A("validation-error-mesaj")},disabled:!1,autoComplete:"off"},{visibilityState:!0,ColLg:"6",item:"INPUT",itemType:"phoneMask",label:A("patient-record.contact-information.phone-label"),labelStatus:!0,name:"phoneNumber",id:"phoneNumber",className:"phoneNumber",rowFixed:!1,clearItem:!1,defaultValue:i?.phoneNumber||void 0,placeholder:A("patient-record.contact-information.phone"),required:!0,requiredType:{minLength:{value:7,message:A("validation-missing-number")},maxLength:{value:25,message:A("validation-missing-number")},required:A("validation-error-mesaj")},readOnly:!1,onChange:void 0,disabled:!1,autoComplete:"off"}];let V;return"create"===v?V=a.jsx(m,{alignment:"top",modal:S,modaltitleText:A("patient-record.contact-information.emergency-title"),modalWidth:"40%",toggle:()=>{r(null),T(!1)},component:a.jsxs(h,{onSubmit:I(e=>{P(!0);let t={userInformationId:L.phrId,relationship:e?.relationship?.value,givenName:e?.givenName,familyName:e?.familyName,phoneNumber:e?.phoneNumber.includes("+")?`${g(e?.phoneNumber)}`:`${g("+"+e?.phoneNumber)}`};i?(t.id=i.id,t.isPrimary=i?.isPrimary,c.emergencyContactUpdate(JSON.stringify(t),e=>{e&&B(L.phrId),P(!1),T(!1)})):(t.isPrimary=!(N.length>0),c.emergencyContact(JSON.stringify(t),e=>{e&&B(L.phrId),P(!1),T(!1)}))}),children:[a.jsx(u,{CreateFormItems:q,register:k,setValue:z,errors:E,control:w,setError:F,clearErrors:M}),a.jsxs(s,{xs:12,justify:"end",className:"mt-3",children:[a.jsx(p,{id:"CancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>T(!1),children:A("button.cancel")}),a.jsx(p,{id:"calculateBtn",variant:"success",size:"sm",type:"submit",children:A("button.save")})]})]})}):"delete"===v&&(V=a.jsx(m,{alignment:"top",modal:S,modaltitleText:A("confirm.delete-header"),modalWidth:"30%",toggle:()=>T(!1),component:a.jsxs(D.Fragment,{children:[a.jsxs("p",{children:[A("confirm.delete-value-sets"),a.jsx("b",{children:" "+i?.givenName+" "+i?.familyName})]}),a.jsxs(s,{xs:12,justify:"end",className:"mt-3",children:[a.jsx(p,{id:"CancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>T(!1),children:A("button.no")}),a.jsx(p,{id:"calculateBtn",variant:"success",size:"sm",type:"button",onClick:()=>{return e=i?.id,P(!0),void c.emergencyContactDelete(e,null,e=>{B(L.phrId),P(!1),T(!1)});var e},children:A("button.yes")})]})]})})),a.jsxs(D.Fragment,{children:[V,a.jsx(n,{cardClass:"CardCreate mt-3 EmergencyContact",cardLight:!1,cardHeader:a.jsxs(p,{size:"sm",onClick:()=>R("create",null),variant:"falcon-default",type:"button",children:[a.jsx("i",{className:"ico-plus"})," ",A("button.add")]}),cardTitle:A("patient-record.contact-information.emergency-title"),cardContent:N?.length>0?a.jsxs(_,{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{"aria-label":"emergency-contact-header"}),a.jsx("th",{children:A("patient-record.contact-information.relationship")}),a.jsx("th",{children:A("patient-record.contact-information.first-last-name")}),a.jsx("th",{children:A("patient-record.contact-information.phone")}),a.jsx("th",{"aria-label":"emergency-contact-header-last"})]})}),a.jsx("tbody",{children:N.map((e,t)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsx("label",{htmlFor:"radioBtn"+t,className:"visually-hidden",children:A("select.selected")+" "+(t+1)}),a.jsx(h.Check,{type:"radio",className:"radioBtn cursor",onChange:t=>(e=>{P(!0);let t={id:e.id,isPrimary:!0,userInformationId:L.phrId,relationship:e?.relationship?.value,givenName:e?.givenName,familyName:e?.familyName,phoneNumber:e?.phoneNumber};c.emergencyContactUpdate(JSON.stringify(t),e=>{e&&B(L.phrId),P(!1),T(!1)})})(e),checked:e?.isPrimary,id:"radioBtn"+t})]}),a.jsx("td",{children:d(e?.relationship?.value)}),a.jsx("td",{children:e?.givenName+" "+e?.familyName}),a.jsx("td",{className:"emergency-contact-phone",children:x(g(e?.phoneNumber))}),a.jsx("td",{children:a.jsxs(j,{resourceName:"menu.profile-management",permission:"create",type:"button",children:[a.jsx(f,{label:A("button.edit"),position:"top",children:a.jsx("i",{className:"ico-pencil-edit mr-2 cursor",onClick:()=>R("edit",e)})}),a.jsx(f,{label:A("button.delete"),position:"top",children:a.jsx("i",{className:"ico-trash-delete cursor",onClick:()=>R("delete",e)})})]})})]},t))})]}):a.jsx(b,{alertType:"info",alertText:a.jsxs("p",{className:"mb-0 marginRight20 contactInfoMessage",children:[a.jsx("i",{className:"ico-info"})," "," "+A("patient-record.contact-information.alert-info")]})})})]})},M=()=>{const[r,d]=D.useState(!1),[j,f]=D.useState(null),[w,_]=D.useState(null),[z,M]=D.useState(!1),[A,L]=D.useState(!1),[B,R]=D.useState(!1),[q,V]=D.useState(!0),[O,H]=D.useState(!0),[U,W]=D.useState(),[G,$]=D.useState(),[Z,J]=D.useState(),[Y,K]=D.useState(!1),[Q,X]=D.useState(!0),[ee,te]=D.useState(null),{setPageLoading:ae}=D.useContext(o),{handleSubmit:ne,register:ie,formState:{errors:se},control:re,setValue:oe}=l(),{register:le,handleSubmit:ce,formState:{errors:de},control:me,setValue:he,resetField:ue}=l({mode:"onClick"}),{t:pe}=t(),xe=N(),ge=e(e=>e.roleManageStore.userTelecom),je=e(e=>e.roleManageStore.PatientPhysical),fe=e=>{if("phrPhoneNumber"!==ee)return e;const t=e?.includes("+")?g(e):`${g("+"+e)}`,a=t?.indexOf(" "),n=t?.substring(0,a),i=t?.substring(a+1).replace(/\s/g,"");return`${n} ${i}`},be=()=>{ae(!0);let e={phoneNumber:`+${U?.value}`,otpType:"CONTACT_UPDATE"};k.sendOTP(e,e=>{e&&(M(!0),R(!1)),ae(!1)},()=>ae(!1))};D.useEffect(()=>{ge&&(W({value:ge?.preferredPhoneNumber||""}),$(ge?.phrPhoneNumber||""),V(!(ge?.phrPhoneNumber===ge?.preferredPhoneNumber)))},[ge]),D.useEffect(()=>{je&&(f(je?.address?je?.address[0]:null),je?.masterPatientId&&c.getTelecom(e=>{e&&xe(S(e))}),J(je?.email))},[je]);const Ne=[{visibilityState:!0,ColLg:"12 phone-number-profile-management",item:"INPUT",itemType:"phoneMask",label:"phoneNumber",labelStatus:!0,name:"phoneNumber",id:"phoneNumber",rowFixed:!1,clearItem:!1,defaultValue:ge?.phrPhoneNumber,placeholder:pe("patient-record.contact-information.phone"),required:!1,readOnly:!1,onChange:e=>{$(e||""),W({value:e||""}),V(!1),H(!1)},disabled:q,autoComplete:"off"}],Ce=(e,t)=>{te(e),"phrPhoneNumber"===e||t?(V(!1),W({value:t&&"number"==typeof t?t:G||""})):(V(!0),W({value:ge[e]?ge[e]:""})),H(!1)},ve=[{visibilityState:!0,ColLg:"12",item:"INPUT",itemType:"text",label:pe("patient-record.contact-information.mail"),labelStatus:!0,name:"email",id:"email",className:null,onChange:e=>{X(!1),J(e.target.value)},rowFixed:!1,readOnly:!1,defaultValue:Z,placeholder:pe("patient-record.contact-information.mail"),required:!0,requiredType:{required:pe("patient-record.contact-information.email-validation"),pattern:{value:/[A-Za-z0-9._%+-]{3,}@[A-Za-z0-9]{1,}([.]{1}[a-zA-Z]{2,}|[.]{1}[a-zA-Z]{2,}[.]{1}[a-zA-Z]{2,})/i,message:pe("patient-record.contact-information.email-valid")}},disabled:!(je?.nationalId&&je?.nationalId.length>1),autoComplete:"off"}];return ge&&a.jsxs(D.Fragment,{children:[a.jsx(n,{cardClass:"CardCreate",cardLight:!1,cardHeader:null,cardTitle:pe("profile.contact"),cardContent:a.jsxs(i,{className:"InformationCard ",children:[a.jsxs(s,{lg:12,children:[" ",a.jsx(b,{alertType:"info",alertText:a.jsxs("p",{className:"mb-0 marginRight20 contactInfoMessage",children:[a.jsx("i",{className:"ico-info"})," "," "+pe("patient-record.contact-information.not-editable-text")," "]})}),a.jsxs(i,{children:[a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:pe("patient-record.contact-information.city")}),x(j?.city)]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:pe("patient-record.contact-information.zone")}),j?.extension?j?.extension[2]?.valueString:"-"]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:pe("patient-record.contact-information.street")}),j?.extension?j?.extension[3]?.valueString:"-"]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:pe("patient-record.contact-information.building")}),j?.extension?j?.extension[0]?.valueString:"-"]})}),a.jsx(s,{lg:4,children:a.jsxs("p",{children:[a.jsx("span",{children:pe("patient-record.contact-information.unit")}),j?.extension?j?.extension[1]?.valueString:"-"]})}),a.jsx(s,{lg:4,children:a.jsx(u,{CreateFormItems:ve,register:le,setValue:he,errors:de,control:me})}),a.jsx(s,{xs:12,justify:"end",style:{marginBottom:"5px"},children:a.jsx(p,{id:"saveBtnEmail",variant:"success",size:"sm",type:"button",disabled:Q,onClick:ce(e=>{K(!0)}),children:pe("button.save")})})]})]}),a.jsxs(s,{lg:12,children:[" ",a.jsx(b,{alertType:"info",alertText:a.jsxs("p",{className:"mb-0 marginRight20 contactInfoMessage",children:[a.jsx("i",{className:"ico-info"})," "," "+pe("patient-record.contact-information.edit-text")," "]})})]}),a.jsx(s,{lg:12,className:"contactProfile",children:a.jsx(h,{children:a.jsxs(i,{children:[a.jsx(s,{lg:4,className:"profileRadio",children:a.jsx("fieldset",{className:"form-fieldset",children:a.jsx(h.Check,{value:"moiPhoneNumber",type:"radio",name:"telecom",id:"radioMoi",className:"radioBtn cursor",disabled:!ge?.moiPhoneNumber,label:a.jsxs("p",{children:[a.jsx("span",{children:pe("patient-record.contact-information.moi-number")}),a.jsx("div",{className:"moiPhoneNumber",children:x(ge?.moiPhoneNumber)})]}),onClick:()=>Ce("moiPhoneNumber"),defaultChecked:ge?.moiPhoneNumber?.replace(/\s/g,"")===ge?.preferredPhoneNumber?.replace(/\s/g,"")})})}),a.jsx(s,{lg:4,children:a.jsx("fieldset",{className:"form-fieldset",children:a.jsx(h.Check,{value:"hcpPhoneNumber",type:"radio",name:"telecom",id:"radioHcp",className:"radioBtn cursor",disabled:!ge?.hcpPhoneNumber,label:a.jsxs("p",{children:[a.jsx("span",{children:pe("patient-record.contact-information.hcp-number")}),a.jsx("div",{className:"hcpPhoneNumber",children:x(ge?.hcpPhoneNumber)})]}),onClick:()=>Ce("hcpPhoneNumber"),defaultChecked:ge?.hcpPhoneNumber?.replace(/\s/g,"")===ge?.preferredPhoneNumber?.replace(/\s/g,"")})})}),a.jsx(s,{lg:4,children:a.jsx(h.Check,{value:"phrPhoneNumber",type:"radio",name:"telecom",id:"radioContactNumber",className:"radioBtn cursor phrPhoneNumber",label:a.jsxs("p",{children:[a.jsx("span",{children:pe("patient-record.contact-information.phr-phone-number")}),a.jsx(u,{CreateFormItems:Ne,register:ie,setValue:oe,errors:se,control:re,className:"registerInput"})]}),onClick:e=>Ce("phrPhoneNumber",e.target.value),defaultChecked:ge?.phrPhoneNumber?.replace(/\s/g,"")===ge?.preferredPhoneNumber?.replace(/\s/g,"")})})]})})}),a.jsx(s,{xs:12,justify:"end",children:a.jsx(p,{id:"saveBtn",variant:"success",size:"sm",type:"button",disabled:O,onClick:()=>{M(!1),d(!0)},children:pe("button.save")})})]})}),Y&&a.jsx(m,{modal:Y,modaltitleText:pe("patient-record.contact-information.change-email-header"),modalWidth:"50%",alignment:"top",backDrop:"static",toggle:()=>K(!1),component:a.jsxs(a.Fragment,{children:[a.jsx(i,{className:"mt-3",children:a.jsx(s,{lg:12,children:a.jsx(b,{alertType:"info",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-info mr-2"}),pe("patient-record.contact-information.email-change-alert")]})})})}),a.jsx(a.Fragment,{children:a.jsxs(s,{xs:12,justify:"end",className:"mt-3",children:[a.jsx(p,{id:"cancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>K(!1),children:pe("button.cancel")}),a.jsx(p,{id:"successBtn",variant:"success",size:"sm",type:"button",onClick:()=>(()=>{ae(!0);let e={email:Z};c.changeEmail(e,e=>{e&&(T(P),I.removeItem("phrPatient")),ae(!1)})})(),children:pe("button.save")})]})})]})}),a.jsx(F,{}),r&&a.jsx(m,{modal:r,modaltitleText:pe("confirm.delete-header"),modalWidth:"25%",alignment:"top",backDrop:"static",toggle:()=>d(!1),component:a.jsxs(D.Fragment,{children:[a.jsx("p",{children:pe("confirm.profile-text")}),!z&&a.jsx(p,{variant:"primary",size:"sm",onClick:()=>{be()},children:pe("button.send-verification-code")}),z&&a.jsxs(a.Fragment,{children:[a.jsxs(C,{className:"mt-2",children:[a.jsx(C.Text,{className:"basic-addon3",id:"count",children:a.jsx(v,{time:180,rendererState:M,reset:B,verified:A})}),a.jsx(y,{size:"sm",type:"text",placeholder:pe("sharing.verify-code"),disabled:z?.info,onChange:e=>_(e?.target?.value)}),a.jsx(p,{variant:"success",size:"sm",onClick:()=>(ae(!0),void k.userCodeControl(w,e=>(e?(M({...z,info:!0,warning:!1}),L(!0)):M({...z,info:!1,warning:!0}),ae(!1),!0))),type:"button",disabled:w?.length<=5||z?.info,children:pe("button.verify")})]}),a.jsxs("a",{className:"newCode",onClick:()=>(R(!0),M(!0),L(!1),void be()),children:[pe("patient-record.contact-information.receive-code")+" ",a.jsxs("span",{children:[" ",pe("patient-record.contact-information.new-code")]})]}),z.info&&a.jsx(i,{className:"mt-3",children:a.jsx(s,{lg:12,children:a.jsx(b,{alertType:"success",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-check-3"}),pe("patient-record.contact-information.success-code")]})})})}),z.warning&&a.jsx(i,{className:"mt-3",children:a.jsx(s,{lg:12,children:a.jsx(b,{alertType:"warning",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-info"}),pe("sharing.verify-error-alert")]})})})}),a.jsxs(s,{xs:12,justify:"end",className:"mt-3",children:[a.jsx(p,{id:"CancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>d(!1),children:pe("button.cancel")}),a.jsx(p,{id:"allergyBtn",variant:"success",size:"sm",type:"button",onClick:()=>(()=>{ae(!0);let e={phrPatientId:je?.masterPatientId,phoneNumberRequest:{preferredPhoneNumber:U?.value?fe(U?.value):"",phrPhoneNumber:G?fe(G):""},email:je?.email};c.updateTelecom(e,e=>{e?(W(e),c.getTelecom(e=>{e&&(xe(S(e)),M(!1)),ae(!1)}),E.Success(pe("patient-record.contact-information.success"))):(W(!1),E.Error(pe("patient-record.contact-information.error"))),ae(!1)}),H(!0),d(!1)})(),disabled:!z.info,children:pe("button.save")})]})]})]})})]})},A=n=>{const{setModal:r,sensitiveDataControl:l,nonSensitiveDataControl:d,pharmacistControl:m,setDisabledSaveBtn:h}=n,[u,x]=D.useState(null),[g,j]=D.useState(!1),[f,N]=D.useState(!1),[S,T]=D.useState(!1),{setPageLoading:P}=D.useContext(o);e(e=>e.roleManageStore.PatientPhysical);const{t:I}=t(),w=()=>{P(!0),k.sendOTP({otpType:"CONSENT_UPDATE"},e=>{e&&j(!0),N(!1),P(!1)},()=>P(!1))};return a.jsxs(D.Fragment,{children:[a.jsx("p",{children:I("confirm.consent-text")}),!g&&a.jsx(p,{variant:"primary",size:"sm",onClick:()=>{w()},children:I("button.send-verification-code")}),g&&a.jsxs(a.Fragment,{children:[a.jsxs(C,{className:"mt-2",children:[a.jsx(C.Text,{className:"basic-addon3",id:"count",children:a.jsx(v,{time:180,rendererState:j,reset:f,verified:S})}),a.jsx(y,{size:"sm",type:"text",disabled:g?.info,placeholder:I("sharing.verify-code"),onChange:e=>x(e?.target?.value)}),a.jsx(p,{variant:"success",size:"sm",disabled:g?.info,onClick:()=>(P(!0),void k.userCodeControl(u,e=>(e?(j({...g,info:!0,warning:!1}),T(!0)):j({...g,info:!1,warning:!0}),P(!1),!0))),type:"button",children:I("button.verify")})]}),a.jsxs("a",{className:"newCode",onClick:()=>(N(!0),T(!1),j(!0),void w()),children:[I("patient-record.contact-information.receive-code")+" ",a.jsxs("span",{children:[" ",I("patient-record.contact-information.new-code")]})]})]}),g.info&&a.jsx(i,{className:"mt-3",children:a.jsx(s,{lg:12,children:a.jsx(b,{alertType:"success",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-check-3"}),I("patient-record.contact-information.success-code")]})})})}),g.warning&&a.jsx(i,{className:"mt-3",children:a.jsx(s,{lg:12,children:a.jsx(b,{alertType:"warning",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-info"}),I("sharing.verify-error-alert")]})})})}),a.jsxs(s,{xs:12,justify:"end",className:"mt-3",children:[a.jsx(p,{id:"CancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>r(!1),children:I("button.cancel")}),a.jsx(p,{id:"allergyBtn",variant:"success",size:"sm",type:"button",onClick:()=>(()=>{P(!0);let e=[];d&&e.push("NON_SENSITIVE_DATA_ACCESS"),l&&e.push("SENSITIVE_DATA_ACCESS"),m&&e.push("PHARMACIST_ACCESS"),c.updateConsentGetData(e,e=>{e&&E.Success(I("patient-record.consent-information.success")),P(!1)}),h(!0),P(!1),r(!1)})(),disabled:!g.info,children:I("button.save")})]})]})},L=n=>{const{setModal:r,setNonSensitiveDataControl:l,setSensitiveDataControl:d,setPharmacistControl:m,setModalTypeReset:h,modalTypeReset:u}=n,x=e(e=>e.roleManageStore.PatientPhysical),[g,j]=D.useState(null),[f,N]=D.useState(!1),[S,T]=D.useState(!1),[P,I]=D.useState(!1),{setPageLoading:E}=D.useContext(o),[_,z]=D.useState(!1),F=e(e=>e.roleManageStore.PatientPhysical),{t:M}=t(),A=()=>{k.sendOTP({otpType:"CONSENT_UPDATE"},e=>{e&&N(!0),I(!1)},()=>E(!1))};return D.useEffect(()=>{h(!0)},[u]),a.jsxs(D.Fragment,{children:[a.jsx("p",{children:M("confirm.consent-text")}),!f&&a.jsx(p,{variant:"primary",size:"sm",onClick:()=>{A()},children:M("button.send-verification-code")}),f&&a.jsxs(a.Fragment,{children:[a.jsxs(C,{className:"mt-2",children:[a.jsx(C.Text,{className:"basic-addon3",id:"count",children:a.jsx(v,{time:180,rendererState:N,reset:P,verified:S})}),a.jsx(y,{size:"sm",type:"text",placeholder:M("sharing.verify-code"),onChange:e=>j(e?.target?.value)}),a.jsx(p,{variant:"success",size:"sm",onClick:()=>(E(!0),k.userCodeControl(g,e=>(e?(N({...f,info:!0,warning:!1}),T(!0)):N({...f,info:!1,warning:!0}),E(!1),!0)),void z(!0)),type:"button",children:M("button.verify")})]}),a.jsxs("a",{className:"newCode",onClick:()=>(I(!0),N(!0),T(!1),void A()),children:[M("patient-record.contact-information.receive-code")+" ",a.jsxs("span",{children:[" ",M("patient-record.contact-information.new-code")]})]})]}),f.info&&a.jsx(i,{className:"mt-3",children:a.jsx(s,{lg:12,children:a.jsx(b,{alertType:"success",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-check-3"}),M("patient-record.contact-information.success-code")]})})})}),f.warning&&a.jsx(i,{className:"mt-3",children:a.jsx(s,{lg:12,children:a.jsx(b,{alertType:"warning",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-info"}),M("sharing.verify-error-alert")]})})})}),a.jsxs(s,{xs:12,justify:"end",className:"mt-3",children:[a.jsx(p,{id:"CancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>r(!1),children:M("button.cancel")}),a.jsx(p,{id:"allergyBtn",variant:"success",size:"sm",type:"button",onClick:()=>(()=>{let e;E(!0);let t={qid:F?.nationalId,dateOfBirth:F?.birthDate};w.getPatientIsVvip(t,t=>{e=t?[]:["NON_SENSITIVE_DATA_ACCESS","PHARMACIST_ACCESS"],c.updateConsentGetData(x.phrId,e,e=>{E(!1),l(!t),d(!1),m(!t)})}),E(!1),r(!1)})(),disabled:!_,children:M("button.save")})]})]})},B=i=>{const{setReLoadList:r}=i,{setPageLoading:d}=D.useContext(o),[x,g]=D.useState(!1),{handleSubmit:j,register:f,formState:{errors:N},control:C,setValue:v}=l({mode:"onClick"}),y=e(e=>e.roleManageStore.PatientPhysical),{t:S}=t(),[T,P]=D.useState(!0),[I,k]=D.useState(!1),[E,w]=D.useState(!0),[_,z]=D.useState(!0),[F,M]=D.useState(!0);D.useEffect(()=>{y&&B()},[y]);const B=()=>{c.consentGetData(e=>{e&&(P(e.includes("SENSITIVE_DATA_ACCESS")),w(e.includes("NON_SENSITIVE_DATA_ACCESS")),z(e.includes("PHARMACIST_ACCESS")))})},R=(e,t,n)=>a.jsxs(a.Fragment,{children:[a.jsx(u,{CreateFormItems:e,register:f,setValue:v,errors:N,control:C}),a.jsx(b,{alertType:"info",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-info"})," ",S(n)]})})]}),q=[{visibilityState:!0,ColLg:"12",item:"SWITCH",itemType:"checkbox",label:S("patient-record.consent-information.swicth1"),name:"nonSensitive",id:"nonSensitive",className:"cursor",onChange:e=>{M(!1),(e=>{e.target.checked?(w(!0),P(!1)):(w(!1),P(!1))})(e)},rowFixed:!1,defaultValue:E,placeholder:"switch placeholder",required:!1,requiredMessage:"switch required",disabled:!1}],V=[{visibilityState:!0,ColLg:"12",item:"SWITCH",itemType:"checkbox",label:S("patient-record.consent-information.swicth2"),name:"sensitive",id:"sensitive",className:void 0,onChange:e=>{M(!1),P(e.target.checked)},rowFixed:!1,defaultValue:T||!1,placeholder:"switch placeholder",required:!1,requiredMessage:"switch required",disabled:!E}],O=[{visibilityState:!0,ColLg:"12",item:"SWITCH",itemType:"checkbox",label:S("patient-record.consent-information.swicth3"),name:"pharmacist",id:"pharmacist",className:"cursor",onChange:e=>{M(!1),z(e.target.checked)},rowFixed:!1,defaultValue:_,placeholder:"switch placeholder",required:!1,requiredMessage:"switch required",disabled:!1}];return a.jsxs(a.Fragment,{children:[(H=!!I,a.jsx(m,{modal:x,modaltitleText:S("confirm.delete-header"),modalWidth:"25%",alignment:"top",backDrop:"static",toggle:()=>g(!1),component:H?a.jsx(L,{setReLoadList:r,setModal:g,sensitiveDataControl:T,nonSensitiveDataControl:E,pharmacistControl:_,setNonSensitiveDataControl:w,setSensitiveDataControl:P,setPharmacistControl:z,setModalTypeReset:k}):a.jsx(A,{setReLoadList:r,setModal:g,sensitiveDataControl:T,nonSensitiveDataControl:E,pharmacistControl:_,setDisabledSaveBtn:M})})),a.jsx(h,{children:a.jsx(n,{cardClass:"CardCreate mt-3 ConsentInfo",cardLight:!1,cardHeader:null,cardTitle:S("patient-record.consent-information.title"),cardContent:a.jsxs(a.Fragment,{children:[R(q,0,"patient-record.consent-information.consent-content1"),R(V,0,"patient-record.consent-information.consent-content2"),R(O,0,"patient-record.consent-information.consent-content3"),a.jsxs(s,{xs:12,justify:"end",className:"mt-3 ",children:[a.jsx(p,{id:"resetBtn",variant:"danger",size:"sm",type:"button",className:"mr-2",onClick:()=>{k(!0),g(!0)},children:S("button.reset")}),a.jsx(p,{id:"saveBtn",variant:"success",size:"sm",type:"button",className:"mr-2",disabled:F,onClick:()=>{g(!0),k(!1)},children:S("button.save")})]})]})})})]});var H},R=()=>{const{setPageLoading:e}=D.useContext(o),{t:n}=t(),[i,r]=D.useState(!1);return a.jsxs(D.Fragment,{children:[a.jsx(b,{alertType:"info",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-info"})," "," "+n("password-change.account-settings")," "]})}),a.jsx(p,{variant:"danger",size:"sm",className:"float-right",onClick:()=>r(!0),children:n("profile.account-settings.suspend-my-profile")}),i&&a.jsx(m,{alignment:"top",modal:i,modaltitleText:n("profile.account-settings.title"),modalWidth:"30%",toggle:()=>r(!1),component:a.jsxs(D.Fragment,{children:[a.jsx(b,{alertType:"info",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-info"})," "," "+n("password-change.account-settings")," "]})}),n("profile.account-settings.deactivate-message"),a.jsxs(s,{xs:12,justify:"end",className:"mt-3",children:[a.jsx(p,{id:"CancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>r(!1),children:n("button.cancel")}),a.jsx(p,{id:"saveBtnFile",variant:"success",size:"sm",type:"button",onClick:()=>(e(!0),void c.accountActivity(null,t=>{t&&(T(P),I.removeItem("phrPatient")),e(!1)})),children:n("profile.account-settings.suspend-my-profile")})]})]})})]})},q=()=>{const{t:e}=t();return a.jsxs(i,{children:[a.jsx(s,{lg:9,className:"profileManagmentRow",children:a.jsx(n,{cardClass:"DataCreate",cardLight:!1,cardHeader:null,cardTitle:e("profile.title"),cardContent:a.jsxs(D.Fragment,{children:[a.jsx(z,{}),a.jsx(M,{}),a.jsx(B,{})]})})}),a.jsx(s,{lg:3,className:"deactiveProfileCard",children:a.jsx(n,{cardClass:"CardCreate ",cardLight:!1,cardHeader:null,cardTitle:e("profile.account-settings.title"),cardContent:a.jsx(R,{})})})]})};export{q as default};
