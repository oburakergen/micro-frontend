import{u as e,k as t,o as a,j as l,w as s,F as o,C as r,B as i,c as n,M as d,S as c,d as m,T as u,l as S,v as p}from"./common-DEUjWhYV.js";import{t as b}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{D as g}from"./index.modern-DlizPJF-.js";import{E as I}from"./emergency-notes-api-Dn82ZTBL.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";import"./index.modern-BcxX8faq.js";import"./Overlay-CK6O43qj.js";const C=(t,a,l,s,o,r,i,n,d)=>{const{t:c}=e(),[m,u]=b.useState([{value:"DEVICES",label:c("category-select.devices")},{value:"DISCOMFORTS_OR_OTHER_CONSIDERATIONS",label:c("category-select.discomfort")},{value:"IMMUNOCOMPROMISED",label:c("category-select.immunocompromised")},{value:"PROSTHETICS",label:c("category-select.prosthetics")},{value:"SPECIAL_NEEDS_OR_OTHER_VULNERABILITIES",label:c("category-select.special-needs")}]);return{visibilityState:!0,ColLg:t,item:"SELECT",itemType:"single",label:s,labelStatus:!0,name:a,id:l,className:null,rowFixed:!1,IsMulti:!1,options:m,clearItem:o,closeMenuOnSelect:!0,defaultValue:r,onChange:d,placeholder:s,required:i,requiredMessage:n,disabled:!1}},h=n=>{const{ViewID:d,phrId:c,setReLoadList:m,setModal:u,ModelData:S}=n,{setPageLoading:p}=b.useContext(t),{t:g}=e(),{register:h,handleSubmit:O,formState:{errors:D},control:E,setValue:_}=a(),[y,v]=b.useState(null),[T,j]=b.useState([{value:"DEVICES",label:"Devices"},{value:"DISCOMFORTS_OR_OTHER_CONSIDERATIONS",label:"Discomforts or Other Considerations"},{value:"IMMUNOCOMPROMISED",label:"Immunocompromised"},{value:"PROSTHETICS",label:"Prosthetics"},{value:"SPECIAL_NEEDS_OR_OTHER_VULNERABILITIES",label:"Special Needs or Other Vulnerabilities"}]),x=[C("12","subject","subject",g("emergency-notes.label-category"),!1,d&&!y?T.find(e=>d.category===e.value):null,!0,g("validation-error-mesaj"),e=>{v(e&&e.name),_("subcategory",null)}),{visibilityState:!0,ColLg:"12",item:"INPUT",itemType:"textarea",label:g("emergency-notes.label-description"),labelStatus:!0,name:"description",id:"description",className:null,rowFixed:!1,defaultValue:d?.description,placeholder:g("emergency-notes.label-description"),required:!0,requiredType:{required:g("validation-error-mesaj")},disabled:!1,maxLength:250,autoComplete:"off"}];return l.jsxs(s,{onSubmit:O(e=>{p(!0);let t={category:e?.subject?.value,description:e?.description};d?(t.id=d?.id,I.notesUpdate(t,e=>{e&&(u(!1),m(!0)),p(!1)})):(t.userInformationId=c,I.notesAdd(t,e=>{e&&(u(!1),m(!0)),p(!1)}))}),children:[l.jsx(o,{CreateFormItems:x,register:h,setValue:_,errors:D,control:E}),l.jsxs(r,{xs:12,justify:"end",className:"mt-3",children:[l.jsx(i,{id:"CancelBtn",variant:"danger",className:"mr-2",size:"sm",type:"button",onClick:()=>u(!1),children:g("button.cancel")}),l.jsx(i,{id:"calculateBtn",variant:"success",size:"sm",type:"submit",children:g("button.save")})]})]})},O=()=>{const[t,a]=b.useState(null),[s,o]=b.useState([]),[r,i]=b.useState([]),[C,O]=b.useState({Id:"",Name:""}),{t:D}=e(),[E,_]=b.useState(!1),[y,v]=b.useState(null),[T,j]=b.useState(!1),x=n(e=>e.roleManageStore.PatientPhysical),[N,f]=b.useState([{value:"DEVICES",label:"Devices"},{value:"DISCOMFORTS_OR_OTHER_CONSIDERATIONS",label:"Discomforts or Other Considerations"},{value:"IMMUNOCOMPROMISED",label:"Immunocompromised"},{value:"PROSTHETICS",label:"Prosthetics"},{value:"SPECIAL_NEEDS_OR_OTHER_VULNERABILITIES",label:"Special Needs or Other Vulnerabilities"}]),R=(e,t)=>{v(e),j(!0),a(t)};let M;"add"===y|"edit"===y&&(M=l.jsx(d,{modal:T,modaltitleText:D("edit"==y?"emergency-notes.title-edit":"emergency-notes.title-create"),modalWidth:"35%",alignment:"top",toggle:()=>j(!1),component:l.jsx(h,{phrId:x?.phrId,ViewID:t,setReLoadList:_,setModal:j})}));const L={DataApi:I,DataGet:"getEmergencyNotes",DataDetail:void 0,DataDelete:"remove",DataGetParams:{},DataState:s,DataSetState:o,DataContentState:r,DataContentSetState:i,modalType:y,setModalType:v,modal:T,setModal:j,deleteIDName:C,deleteMessage:D("data-table-list.delete-message")+' "'+C?.Name+'" ?',CustomPagination:!0,CustomPageSort:!1,CustomPage:!1,defaultSortField:"lastModifiedDate",defaultSortOrder:"desc",TableKeyField:"id",deleteComponent:null,detailComponent:null,detailColumnName:null,filterComponent:null,cardLight:!1,cardTitle:null,PermissionPage:"menu.important-health-information",newButton:!0,newButtonName:D("button.add"),newButtonID:"NewButtonID",newButtonColor:"falcon-default",newPermissionType:"create",newButtonFunction:()=>R("add",null),excelButton:!1,filterButton:!1,contentComponent:l.jsx(S,{alertType:"info",alertText:l.jsxs("p",{className:"mb-0 marginRight20",children:[l.jsx("i",{className:"ico-info"})," "," "+D("emergency-notes.list-disclaimer")," "]})}),TableColumns:[{dataField:"category",text:D("emergency-notes.label-category"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!0,formatter:(e,t)=>c(N.find(t=>e===t.value).label)},{dataField:"description",text:D("emergency-notes.label-description"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1,formatter:(e,t)=>c(e)},{dataField:"",text:D("DataTable.actions"),classes:"border-0 align-middle IconCol",headerClasses:"border-0",sort:!1,formatter:(e,t)=>l.jsx(b.Fragment,{children:l.jsxs(m,{resourceName:"menu.important-health-information",permission:"create",type:"button",children:[l.jsx(u,{label:D("button.edit"),position:"top",children:l.jsx("i",{className:"ico-pencil-edit mr-2 cursor",onClick:()=>R("edit",t)})}),l.jsx(u,{label:D("button.delete"),position:"top",children:l.jsx("i",{className:"ico-trash-delete cursor",onClick:()=>{return e=t?.description,a=t?.id,v("delete"),j(!0),void O({Id:a,Name:e});var e,a}})})]})})}]};return l.jsx(p,{cardClass:"CardCreate",cardLight:!1,cardTitle:D("emergency-notes.title"),cardContent:l.jsxs(b.Fragment,{children:[l.jsx("div",{className:"SearchBox",children:x&&l.jsx(g,{ViewID:t,ReLoadList:E,setReLoadList:_,DynamicDataListItem:L})}),M]})})};export{O as default};
