import{o as e,u as o,k as t,j as a,w as n,F as i,C as s,B as l,M as r,l as d,d as m}from"./common-DEUjWhYV.js";import{t as u}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{C as c}from"./index.modern-CaeBwUa5.js";import{B as b}from"./bon-marrow-blood-donation-api-B0Cr9OgK.js";import{I as p}from"./init-select-box-B47yySkU.js";import{D as h}from"./dashboard-api-CaDzrB6T.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";import"./Overlay-CK6O43qj.js";const g=(e,o,t,a,n,i,s,l,r,d=null)=>{const[m,c]=u.useState([]);u.useEffect(()=>{b()},[e]);const b=()=>{h.getLocation(e,e=>{e&&c(e?.locationList)})};return{visibilityState:!0,ColLg:o,item:"SELECT",itemType:"single",label:a,labelStatus:!0,name:t,id:t,className:null,rowFixed:!1,IsMulti:!1,options:m,clearItem:n,closeMenuOnSelect:!0,defaultValue:i,onChange:r,placeholder:a,required:s,requiredMessage:l,disabled:!1}},j=(e,o,t,a,n,i,s,l,r,d=!1,m=null)=>{const[c,b]=u.useState([]);u.useEffect(()=>{e?p():b([])},[e]);const p=()=>{h.getLocation(e,e=>{e&&b(e?.locationList)})};return{visibilityState:!0,ColLg:o,item:"SELECT",itemType:"single",label:a,labelStatus:!0,name:t,id:t,className:null,rowFixed:!1,IsMulti:d,options:c,clearItem:n,closeMenuOnSelect:!0,defaultValue:i,onChange:r,placeholder:a,required:s,requiredMessage:l,disabled:!1}},x=r=>{const{phrId:d,setModal:m,InitSelect:c,ModelData:p,getDetail:h}=r,[x,y]=u.useState(null),{handleSubmit:v,register:S,formState:{errors:f},control:_,setValue:w}=e(),{t:C}=o(),{setPageLoading:L}=u.useContext(t),N=[g("4e5b23b4-f460-11eb-9a03-0242ac130003","6","city",C("patient-record.contact-information.city"),!1,p?.city,!0,C("validation-error-mesaj"),e=>y(e&&e.value)),j(x||p?.city?.value,"12","districtList",C("patient-record.contact-information.district"),!1,p?.districtList,!0,C("validation-error-mesaj"),void 0,!0),{visibilityState:!0,ColLg:"12",item:"SELECT",itemType:"single",label:C("bon-marrow-blood-donation.days"),labelStatus:!0,name:"days",id:"days",className:null,rowFixed:!1,IsMulti:!0,onChange:void 0,options:c?.DAYSOFWEEK,closeMenuOnSelect:!0,defaultValue:p?.days,placeholder:C("bon-marrow-blood-donation.days"),required:!0,requiredMessage:C("validation-error-mesaj"),disabled:!1},{visibilityState:!0,ColLg:"12",item:"SELECT",itemType:"single",label:C("bon-marrow-blood-donation.hours"),labelStatus:!0,name:"hours",id:"hours",className:null,rowFixed:!1,IsMulti:!0,onChange:void 0,options:c?.BLOOD_DONATION_HOURS,closeMenuOnSelect:!0,defaultValue:p?.hours,placeholder:C("bon-marrow-blood-donation.hours"),required:!0,requiredMessage:C("validation-error-mesaj"),disabled:!1},{visibilityState:!0,ColLg:"12",item:"SELECT",itemType:"single",label:C("bon-marrow-blood-donation.situation"),labelStatus:!0,name:"situation",id:"situation",className:null,rowFixed:!1,IsMulti:!1,onChange:void 0,options:c?.BLOOD_DONATION_SITUATIONS,closeMenuOnSelect:!0,defaultValue:p?.situation,placeholder:C("bon-marrow-blood-donation.situation"),required:!0,requiredMessage:C("validation-error-mesaj"),disabled:!1}];return a.jsxs(n,{onSubmit:v(e=>{L(!0);let o={userId:d,city:e?.city.value,districtList:e?.districtList.map(e=>e.value),days:e?.days.map(e=>e.value),hours:e?.hours.map(e=>e.value),situation:e?.situation.value};b.saveBloodDonation(o,e=>{e&&h(d),L(!1),m(!1)})}),children:[a.jsx(i,{CreateFormItems:N,register:S,setValue:w,errors:f,control:_}),a.jsxs(s,{xs:12,justify:"end",className:"mt-3",children:[a.jsx(l,{id:"cancelBtn",size:"sm",variant:"danger",className:"mr-2",onClick:()=>m(!1),type:"button",children:C("button.cancel")}),a.jsx(l,{id:"saveBtn",size:"sm",variant:"success",type:"submit",children:C("button.save")})]})]})},y=e=>{const{phrId:n}=e,[i,h]=u.useState(!1),[g,j]=u.useState(!1),[y,v]=u.useState(!1),[S,f]=u.useState(null),{setPageLoading:_}=u.useContext(t),{t:w}=o();u.useEffect(()=>{p("blood_donation_situations,blood_donation_hours,DaysOfWeek",v,y)},[]),u.useEffect(()=>{n&&C(n)},[n]);const C=e=>{_(!0),b.getBloodDonation(e,e=>{e?(f(e),j(!0)):j(!1),_(!1)})};let L;return i&&(L=a.jsx(r,{modal:i,modaltitleText:w("bon-marrow-blood-donation.blood-donation-title"),modalWidth:"45%",alignment:"top",toggle:()=>h(!1),component:a.jsx(x,{setModal:h,phrId:n,ModelData:S,InitSelect:y,getDetail:C})})),a.jsxs("div",{className:"mt-3",children:[L,a.jsx(d,{alertType:"info",alertText:a.jsxs("p",{className:"mb-0 marginRight20",children:[a.jsx("i",{className:"ico-info"})," "+w("bon-marrow-blood-donation.blood-donation-info")]})}),g&&a.jsx(d,{alertType:"success",alertIcon:a.jsx("i",{className:"ico-blood-donation-1 font-size-38"}),alertHeader:w("bon-marrow-blood-donation.blood-donation-volunteer"),alertText:a.jsxs(u.Fragment,{children:[w("bon-marrow-blood-donation.blood-donation-volunteer-message"),a.jsxs("b",{children:[S?.city?.label," /"," ",S?.districtList.map(e=>e?.label+", ")]})," ",w("bon-marrow-blood-donation.blood-donation-volunteer-message-1"),a.jsx("b",{children:S?.hours.map(e=>e?.label+", ")}),w("bon-marrow-blood-donation.blood-donation-volunteer-message-2"),a.jsx("b",{children:S?.days.map(e=>e?.label+", ")})]})}),a.jsx(s,{lg:12,justify:"end",className:"mt-3",children:g?a.jsxs(u.Fragment,{children:[a.jsx(m,{resourceName:"bon-marrow-blood-donation",permission:"create",type:"button",children:a.jsx(l,{id:"BloodDonationBtn",variant:"primary",size:"sm",type:"button",className:"mr-2",onClick:()=>h(!0),children:w("bon-marrow-blood-donation.blood-donation-edit")})}),a.jsx(m,{resourceName:"bon-marrow-blood-donation",permission:"delete",type:"button",children:a.jsx(c,{HeaderText:w("confirm.delete-header"),ContentText:a.jsx(u.Fragment,{children:a.jsx("p",{children:w("confirm.delete-text")})}),ButtonYes:w("button.yes"),ButtonNo:w("button.no"),ButtonContent:a.jsx(l,{id:"DeleteBtn",variant:"danger",size:"sm",type:"button",children:w("bon-marrow-blood-donation.blood-donation-delete")}),Method:()=>{b.removeBloodDonation(n,e=>{f(null),j(!1)})}})})]}):a.jsx(m,{resourceName:"bon-marrow-blood-donation",permission:"create",type:"button",children:a.jsx(l,{id:"BloodDonationBtn",variant:"success",size:"sm",type:"button",className:"mr-2",onClick:()=>h(!0),children:w("bon-marrow-blood-donation.blood-donation-add")})})})]})};export{y as default};
