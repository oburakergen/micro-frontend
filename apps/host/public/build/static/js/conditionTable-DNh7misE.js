import{h as e,i as a,u as t,j as s,S as r,g as i,c as d,Z as l}from"./common-DEUjWhYV.js";import{t as n}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{D as o}from"./index.modern-DaA0Mkma.js";import{T as c}from"./Table-BjqSWWQP.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";import"./index.modern-BcxX8faq.js";import"./Overlay-CK6O43qj.js";const h=new class extends e{constructor(){super(`${a.API}/phr`)}getList(e){super.get("disease/find-detail-by-patient",e,!1)}getDetail(e,a){super.get(`disease/find-by-id/${e}`,a,!1)}conditionDataList(e,a){super.post("disease/find-by-cci",e,a,!1,!1)}search(e,a,t){let s={criteria:{field:e.value,value:a},...e.params};super.post("disease/search",s,t,!1,!1)}},m=e=>{const{ViewID:a}=e,[d,l]=n.useState(null),{t:o}=t();return n.useEffect(()=>{a&&h.getDetail(a,e=>{e&&l(e)})},[a]),s.jsxs(c,{bordered:!0,className:"fs--1",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{"aria-label":"table-header-label"}),s.jsx("th",{"aria-label":"table-header-label"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"bg-100",style:{width:"30%"},children:o("condition.name")}),s.jsx("td",{children:r(d?.codeSystem?.display)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"bg-100",style:{width:"30%"},children:o("condition.recorded-date")}),s.jsx("td",{children:r(i(d?.createdDate,"DD/MMM/YYYY"))})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"bg-100",style:{width:"30%"},children:o("condition.recorder-by")}),s.jsx("td",{children:r(d?.recorder)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"bg-100",style:{width:"30%"},children:o("condition.organization")}),s.jsx("td",{children:r(d?.performingOrgName)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"bg-100",style:{width:"30%"},children:o("condition.severity")}),s.jsx("td",{children:r(d?.severity)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"bg-100",style:{width:"30%"},children:o("condition.description")}),s.jsx("td",{children:r(d?.note)})]})]})]})},x=({title:e,diseaseTypes:a})=>{const[l,x]=n.useState(!1),j=d(e=>e.roleManageStore.PatientPhysical),{t:p}=t(),[u,b]=n.useState(!1),[g,D]=n.useState(null),[S,f]=n.useState(),[y,N]=n.useState(),{loadingControl:C,tableData:v,tableDataContent:w,nonExpandableIdList:_,setTableData:T,setTableDataContent:Y}=(e=>{const[a,t]=n.useState([]),[s,r]=n.useState([]),[i,d]=n.useState([]),[l,o]=n.useState(!0);return n.useEffect(()=>{(async()=>{const a={diseaseTypes:e};h.conditionDataList(a,e=>{if(e){const a=e?.filter(e=>!e?.details?.length)?.map(e=>e?.id);t(e),r(e),d(a)}else t([]),r([]);o(!1)})})()},[e]),{loadingControl:l,tableData:a,tableDataContent:s,nonExpandableIdList:i,setTableData:t,setTableDataContent:r}})(a),M=e=>{D(e),N(!y),f("view")},L=()=>s.jsxs("span",{className:"order",children:[s.jsx("span",{className:"dropdown",children:s.jsx("span",{className:"caret"})}),s.jsx("span",{className:"dropup",children:s.jsx("span",{className:"caret"})})]}),I={DataApi:h,DataGet:void 0,DataDetail:"getDetail",DataCustom:void 0,DataDelete:null,DataSearch:null,SearchBox:!0,loadingControl:C,DataState:v,DataSetState:T,DataContentState:w,DataContentSetState:Y,modalType:S,setModalType:f,modal:y,setModal:N,pageRowSize:20,TableKeyField:"id",defaultSortField:"createdDate",defaultSortOrder:"desc",CustomPagination:!0,CustomPage:!0,CustomPageSort:!0,cardClass:"CardCreate mb-3",filterSearchInput:!0,filterSearchPlaceholder:p("filter.search"),filterSearchInputFunction:"search",InputSearchLength:2,deleteComponent:null,detailComponent:s.jsx(m,{ViewID:g}),detailColumnName:null,filterComponent:null,FilterSelectState:l,FilterSelectSetState:x,cardLight:!1,cardTitle:e,PermissionPage:null,newButton:!1,excelButton:!1,filterButton:!1,TableExpandRow:{parentClassName:"expandActive",showExpandColumn:!0,expandHeaderColumnRenderer:({isAnyExpands:e})=>e?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"ico-minimize-2 cursor"}),s.jsx("span",{className:"visually-hidden",children:"expandRow"})]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"ico-plus-1 cursor"}),s.jsx("span",{className:"visually-hidden",children:"expandRow"})]}),renderer:a=>s.jsx("div",{className:"expandContent",children:s.jsx("div",{className:"detail-content",children:s.jsx("ul",{children:s.jsxs("li",{children:[s.jsx("div",{className:"detail"}),s.jsx("div",{className:"detail detail-main",children:s.jsxs("fieldset",{children:[s.jsx("legend",{className:"visually-hidden",children:e}),s.jsx("div",{className:"p-2 position-relative",children:s.jsx("div",{className:"detail-content detail-content-table",children:s.jsxs(c,{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:"sortable border-0",children:[p("condition.name"),L()]}),s.jsxs("th",{className:"sortable border-0",children:[p("condition.recorded-date"),L()]}),s.jsxs("th",{className:"sortable border-0",children:[p("condition.recorder-by"),L()]}),s.jsxs("th",{className:"sortable border-0",style:{paddingLeft:"0px !important"},children:[p("condition.organization"),L()]}),s.jsx("th",{className:"sortable border-0",children:p("condition.detail")})]})}),s.jsx("tbody",{children:a?.details?.map((e,a)=>s.jsxs("tr",{children:[s.jsx("td",{children:r(e?.codeSystem?.display)}),s.jsx("td",{children:i(e?.createdDate,"DD/MMM/YYYY")}),s.jsx("td",{children:r(e?.recorder)}),s.jsx("td",{children:r(e?.performingOrgName)}),s.jsx("td",{className:"IconCol",children:s.jsx("i",{className:"ico-show-1 cursor ",onClick:()=>M(e?.id)})})]},a))})]})})})]})})]})})})}),nonExpandable:_},TableColumns:[{dataField:"codeSystem.display",text:p("condition.name"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!0,formatter:(e,a)=>r(e)},{dataField:"createdDate",text:p("condition.recorded-date"),classes:"border-0 align-middle",headerClasses:"border-0 numericSort",sort:!0,formatter:e=>r(i(e,"DD/MMM/YYYY")),filterValue:e=>r(i(e,"DD/MMM/YYYY"))},{dataField:"recorder",text:p("condition.recorder-by"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!0,formatter:e=>r(e),filterValue:e=>r(e)},{dataField:"performingOrgName",text:p("condition.organization"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!0,formatter:e=>r(e),filterValue:e=>r(e)},{dataField:"",text:p("condition.detail"),classes:"border-0 align-middle IconCol",headerClasses:"border-0",formatter:(e,a)=>s.jsx("i",{className:"ico-show-1 cursor  ",onClick:()=>M(a?.id)})}]};return s.jsx("div",{className:"SearchBox conditionTable",children:j&&s.jsx(o,{ViewID:g,ReLoadList:u,setReLoadList:b,StaticDataListItem:I})})};x.propTypes={title:l.string.isRequired,diseaseTypes:l.array.isRequired};export{x as default};
