import{q as e,k as a,u as t,c as n,o as s,cn as l,j as r,M as i,co as o,cp as c,v as d,B as m,S as u,g as h,R as g,C as x,l as j,F as f}from"./common-DEUjWhYV.js";import{t as p}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";const S=()=>{const[S,b]=p.useState(null),[N,v]=p.useState(!1),[_,w]=p.useState(!1),C=e(),[D,M]=p.useState(10),[R,T]=p.useState(10),{setPageLoading:y}=p.useContext(a),[H,E]=p.useState(null),[L,z]=p.useState(),[A,F]=p.useState(),{t:I}=t(),B=n(e=>e.roleManageStore.loginName),P=n(e=>e.roleManageStore.NewsIcon),{register:V,handleSubmit:Y,formState:{errors:k},control:O,setValue:q}=s();let U;p.useEffect(()=>{P&&(W(10),C(l(!1)))},[P]),p.useEffect(()=>{W()},[B,N]),p.useEffect(()=>{_&&W()},[_]),"view"===L&&(U=r.jsx(i,{modal:A,modaltitleText:r.jsx("h4",{children:I("announcement-news.announcement-detail")}),modalWidth:"65%",toggle:()=>F(!1),alignment:"top",className:"AnnouncementAlert",component:r.jsx(o,{ModelData:H,setModalOpenClose:F,setRefreshList:w})}));const W=(e=10)=>{y(!0);let a={domainNameSet:["PHR"],announcementType:N?"UNREAD":"ALL",contentIncluded:!0,includeAll:!1,isRead:!1,search:[{field:"startDate",operation:"GREATER_THAN",value:new Date((new Date).setMonth((new Date).getMonth()-1))}],pageable:{pageSize:R||e,pageIndex:0,sortField:"startDate",sortOrder:"desc",unPaged:!1}};c.searchNotification(JSON.stringify(a),e=>{e?(b(e?.content),M({total:e?.totalElements,pageSize:e?.size})):b([]),y(!1)})};return p.useEffect(()=>{R&&W(R)},[R]),r.jsxs(p.Fragment,{children:[r.jsx(d,{cardClass:null,cardLight:!1,cardHeader:r.jsx(f,{CreateFormItems:[{visibilityState:!0,ColLg:"12",item:"SWITCH",itemType:"switch",label:I("announcement-news.unread"),name:"unread",id:"unread",className:"unReadSwitch",onChange:()=>v(!N),rowFixed:!1,defaultValue:!1,placeholder:null,required:!1,disabled:!1}],register:V,setValue:q,errors:k,control:O}),cardTitle:I("announcement-news.title"),cardContent:r.jsx(p.Fragment,{children:S?.length>0?r.jsxs(p.Fragment,{children:[r.jsx("ul",{className:"list-style-none encounterHistory announcementList ",children:S?.map((e,a)=>r.jsxs("li",{children:[r.jsx(m,{variant:"falcon-default",onClick:()=>{return a=e?.id,void c.getReadMore(a,e=>{e?(E(e),F(!0),z("view")):b([]),y(!1)});var a},size:"sm",className:"margin-right-10 float-right evaluateBtn",children:I("button.read-more")}),r.jsxs("div",{className:"encounterVisitContent ",children:[r.jsx("div",{className:e?.isRead?"beftBorder bg":"beftBorder Unread"}),r.jsxs("div",{className:"visitBody InformationCard",children:[r.jsx("h3",{children:u(e?.title)}),r.jsxs("p",{children:[r.jsx("span",{children:I("announcement-news.table-label-description")}),u(e.description)]}),r.jsx("div",{className:"date",children:I("announcement-news.label-date")+" : "+h(e.startDate,"DD/MMM/YYYY")})]})]})]},a))}),r.jsxs(g,{children:[r.jsx(x,{lg:12,className:"text-align-center mt-3",children:r.jsx(m,{size:"sm",disabled:!(D?.total>10&&D?.pageSize<=D?.total),variant:"falcon-default",className:"px-4 ms-2",onClick:()=>{T(D?.pageSize+10)},children:I("button.load-more")})})," ",r.jsxs(x,{lg:12,children:[r.jsxs("div",{className:"float-left mr-2",children:[r.jsx("div",{className:"cube table-bg-gray"})," ",I("announcement-news.read-announcement")]}),r.jsxs("div",{className:"float-left  mr-2",children:[r.jsx("div",{className:"cube table-bg-yellow"})," ",I("announcement-news.unread-announcement")]})]})]})]}):r.jsx(d,{cardClass:"DataHeaderNone",cardLight:!1,cardTitle:null,cardContent:r.jsx(j,{alertType:"info",alertText:r.jsx("p",{className:"mb-0 marginRight20",children:I("DataTable.data-not-found")})})})})}),U]})};export{S as default};
