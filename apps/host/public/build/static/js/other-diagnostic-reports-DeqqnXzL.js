import{h as e,i as t,u as a,j as r,M as s,l as o,S as i,g as l,v as d}from"./common-DEUjWhYV.js";import{t as n}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{D as c}from"./index.modern-DaA0Mkma.js";import{A as m,P as u}from"./procedure-ordered-list-IFoFyNe4.js";const p=new class extends e{constructor(){super(`${t.API}/phr`)}getReportList(e){super.get("diagnostic-report/find-by-patient",e)}getReport(e,t){super.get(`diagnostic-report/find-document-by-id/${e}`,t)}diagnosticReportDataList(e,t){super.post("diagnostic-report/find-by-patient-by-link",e,t,!1,!1)}search(e,t,a){let r={field:e.value,value:t};super.post("diagnostic-report/search",r,a,!1,!1)}},g=e=>{const{encounterVisit:t,data:g}=e,[h,S]=n.useState([]),[f,x]=n.useState([]),[b,C]=n.useState(!1),[j,D]=n.useState(null),[L,N]=n.useState(null),[T]=n.useState({Id:"",Name:""}),{t:y}=a(),[I,v]=n.useState(!1),[F,P]=n.useState({modalType:null,isModal:!1});let R;"documentView"===F.modalType&&(R=r.jsx(s,{modal:F,modaltitleText:y("diagnostic-reports.document-modal"),modalWidth:"50%",alignment:"right",toggle:()=>P(!F),component:j?r.jsx("div",{className:"IframeContent pageFile",children:r.jsx("iframe",{width:"100%",height:"100%",src:"data:"+L+";base64,"+j,frameBorder:"0",allowFullScreen:!0})}):r.jsx(o,{alertType:"info",alertText:r.jsxs("p",{className:"mb-0 marginRight20",children:[r.jsx("i",{className:"ico-info"})," "," "+y("no-report-data")]})})}));const M={DataApi:g?void 0:p,DataGet:g?void 0:"getReportList",DataDetail:null,DataDelete:null,DataSearch:null,DataState:g||h,DataSetState:S,DataContentState:g||f,DataContentSetState:x,defaultSortField:"effectiveDate",defaultSortOrder:"desc",deleteIDName:T,SearchBox:!t,TableKeyField:"id",pageRowSize:20,filterSearchInput:!0,filterSearchPlaceholder:y("filter.search"),filterSearchInputFunction:"search",InputSearchLength:2,CustomPage:!0,CustomPagination:!0,CustomPageSort:!0,CustomSearchIcon:r.jsx("i",{className:"ico-funnel-filter"}),CustomSearchItemsDefault:{label:y("diagnostic-reports.name"),value:"code:text"},deleteComponent:null,detailComponent:null,detailColumnName:null,filterComponent:null,FilterSelectState:b,FilterSelectSetState:C,cardLight:!1,CardClass:t?"encounterVisitTitle":"unsetBoxShadow",cardTitle:t&&y("diagnostic-reports.other-tab"),PermissionPage:null,newButton:!1,excelButton:!1,filterButton:!1,TableColumns:[{dataField:"reportName",text:y("diagnostic-reports.name"),classes:"border-0 align-middle labProcedureTitle",headerClasses:"border-0",sort:!1,formatter:e=>i(e)},{dataField:"effectiveDate",text:y(t?"diagnostic-reports.performed-date":"diagnostic-reports.recorded-date"),classes:"border-0 align-middle labProcedureTitle",headerClasses:"border-0 numericSort",sort:!0,formatter:e=>i(l(e,"DD/MMM/YYYY")),filterValue:(e,t)=>i(l(e,"DD/MMM/YYYY"))},{dataField:"orderingOrgName",text:y("diagnostic-reports.ordered-by"),classes:"border-0 align-middle labProcedureTitle",headerClasses:"border-0",sort:!0,formatter:e=>i(e)},{dataField:"performingOrgName",text:y("diagnostic-reports.performed-by"),classes:"border-0 align-middle labProcedureTitle",headerClasses:"border-0",sort:!0,formatter:e=>i(e)},{dataField:"detail",text:y("diagnostic-reports.column-report"),classes:"border-0 align-middle IconCol",headerClasses:"border-0",sort:!1,hidden:t,formatter:(e,t)=>t?.hasReport?r.jsx("i",{className:"ico-health-report-1 cursor ",onClick:()=>{return e=t?.id,D(null),N(null),void p.getReport(e,e=>{e&&(D(e?.data),N(e?.contentType)),P({...F,modalType:"documentView",isModal:!0})});var e}}):r.jsx("i",{className:"ico-health-report-1 cursor ghostBtn "})}]};return t?r.jsx(c,{ReLoadList:I,setReLoadList:v,StaticDataListItem:M}):r.jsxs(r.Fragment,{children:[r.jsx(m,{className:"mb-2",children:r.jsxs(m.Item,{eventKey:"0",children:[r.jsx(m.Header,{style:{marginLeft:"5px"},children:y("diagnostic-reports.ordered-tests")}),r.jsx(m.Body,{className:"p-0",children:r.jsx(u,{serviceRequestType:"IMAGING"})})]})}),r.jsx(d,{cardClass:"CardCreate",cardLight:!1,cardTitle:y("diagnostic-reports.completed-tests"),cardContent:r.jsxs("div",{className:"SearchBox",children:[r.jsx(c,{ReLoadList:I,setReLoadList:v,StaticDataListItem:M}),R]})})]})};export{g as O};
