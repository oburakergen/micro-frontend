import{u as e,j as a,g as t,S as s,cq as l,M as r,T as i,R as d,C as n}from"./common-DEUjWhYV.js";import{t as o}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{D as c}from"./index.modern-DaA0Mkma.js";import{A as m}from"./allergy-intolerance-api-BJKp79-f.js";import{B as h}from"./index.modern-BcxX8faq.js";import{T as x}from"./Table-BjqSWWQP.js";import{T as g,a as j}from"./ToggleButtonGroup-BpTfK3cD.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";import"./Overlay-CK6O43qj.js";const u=i=>{const{allergy:d}=i,[n,g]=o.useState([]),[j,u]=o.useState([]),[p,b]=o.useState(!1),[y,C]=o.useState({Id:"",Name:""}),[S,f]=o.useState({text:null,type:null}),[N,D]=o.useState(!1),{t:v,i18n:L}=e(),[Y,w]=o.useState(!1),T=(e,a)=>{f({text:e,type:a}),D(!0)},M={DataApi:m,DataGet:"getReactionList",DataGetParams:d.id,DataDetail:null,DataDelete:null,DataSearch:null,DataState:n,DataSetState:g,DataContentState:j,DataContentSetState:u,SearchBox:!0,deleteIDName:y,CustomPagination:!0,TableKeyField:"id",filterSearchInput:!1,filterSearchPlaceholder:"search",deleteComponent:null,detailComponent:null,detailColumnName:null,filterComponent:null,FilterSelectState:p,FilterSelectSetState:b,cardLight:!1,cardClass:"CardCreate",cardTitle:v("allergy.reaction-list"),PermissionPage:null,newButton:!1,excelButton:!1,filterButton:!1,TableColumns:[{dataField:"substance",text:v("allergy.substance"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1},{dataField:"",text:v("allergy.manifestation"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1,formatter:(e,t)=>a.jsx("ul",{children:t.manifestationList&&t.manifestationList.map((e,t)=>a.jsx("li",{children:e?.display},t))}),filterValue:(e,a)=>a.manifestationList&&a.manifestationList.map(e=>e?.display)},{dataField:"",text:v("allergy.description"),classes:"border-0 align-middle",headerClasses:"border-0",formatter:(e,t)=>t.description&&t.description.length>0?a.jsx("i",{className:"ico-note cursor",onClick:()=>T(t.description,"description")}):"-"},{dataField:"severity",text:v("allergy.severity"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1},{dataField:"onset",text:v("allergy.label-date"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1,formatter:(e,a)=>t(a.onset,"DD/MMM/YYYY")},{dataField:"exposureRoute",text:v("allergy.exposure-route"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1},{dataField:"note",text:v("allergy.note"),classes:"border-0 align-middle",headerClasses:"border-0",formatter:(e,t)=>t.note&&t.note.length>0?a.jsx("i",{className:"ico-note cursor",onClick:()=>T(t.note,"note")}):"-"}]};return a.jsxs(o.Fragment,{children:[a.jsxs(x,{bordered:!0,className:"fs--1",children:[a.jsx("thead",{className:"visually-hidden",children:a.jsxs("tr",{children:[a.jsx("th",{"aria-label":"table-header-label"}),a.jsx("th",{"aria-label":"table-header-label"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.type")}),a.jsx("td",{children:s(d?.type)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.category")}),a.jsx("td",{children:s(d?.category)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.subtance-name")}),a.jsx("td",{children:s(d?.name)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.criticality")}),a.jsx("td",{children:l(d?.criticality)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.clinical-status")}),a.jsx("td",{className:"allergyBadge",children:a.jsx(h,{status:"active"===(d?.status||"").toLowerCase(),enableText:v("badge.enableText"),passiveText:v("badge.inactiveText")})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.verification-status")}),a.jsx("td",{children:s(d?.verificationStatus.charAt(0).toUpperCase()+d?.verificationStatus.slice(1))})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.recorder-organization")}),a.jsx("td",{children:s(d?.performingOrgName)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.recorder")}),a.jsx("td",{children:s(d?.recorder)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.recorded-date")}),a.jsx("td",{children:t(d?.recordedDate,"DD/MMM/YYYY")})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.last-manifestation-date")}),a.jsxs("td",{children:[" ",t(d?.lastOccurrence,"DD/MMM/YYYY")]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.onset-date")}),a.jsx("td",{children:t(d?.onset,"DD/MMM/YYYY")})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"bg-100",style:{width:"30%"},children:v("allergy.note")}),a.jsx("td",{children:a.jsx("ul",{children:d.notes&&d.notes.map((e,t)=>a.jsx("li",{children:e},t))})})]})]})]}),a.jsx("div",{className:"SearchBox ModalDetail allergy-search-arabic",children:a.jsx(c,{ReLoadList:Y,setReLoadList:w,StaticDataListItem:M})}),N&&a.jsx(r,{alignment:"top",modal:N,modaltitleText:v("note"==S?.type?"allergy.notes":"allergy.description"),modalWidth:"50%",toggle:()=>D(!1),component:S?.text})]})},p=()=>{const[h,x]=o.useState([]),[p,b]=o.useState([]),[y,C]=o.useState(!1),[S,f]=o.useState(!1),[N,D]=o.useState(null),[v,L]=o.useState(null),[Y,w]=o.useState(!1),[T,M]=o.useState("ACTIVE"),[F,_]=o.useState(!1),[R,I]=o.useState({Id:"",Name:""}),{t:B,i18n:P}=e(),A={DataApi:m,DataGet:"allergyIntoleranceDataList",DataState:h,DataSetState:x,DataGetParams:T,DataContentState:p,DataContentSetState:b,modalType:N,setModalType:D,modal:F,setModal:_,CustomPagination:!0,SearchBox:!1,pageRowSize:20,deleteIDName:R,TableKeyField:"id",filterSearchInput:!1,newButton:!1,deleteComponent:null,detailComponent:null,detailColumnName:null,filterComponent:null,FilterSelectState:S,FilterSelectSetState:f,cardLight:!1,cardTitle:"",PermissionPage:"menu.allergies",CardClass:"CardCreate marginBottom0",filterButton:!1,contentComponent:a.jsx("div",{className:"allergiesBtn",children:a.jsx(g,{type:"checkbox",name:"options",defaultValue:1,children:a.jsx(j,{id:"tbg-radio-3",variant:"falcon-default",size:"sm",onChange:e=>{return a=e.target.checked,M(a?"ALL":"ACTIVE"),C(!0),void w(a);var a},children:B(Y?"button.show-active-allergies":"button.show-active-allergies-check")})})}),TableExpandRow:{parentClassName:"expandActive",nonExpandable:[],showExpandColumn:!0,expandHeaderColumnRenderer:({isAnyExpands:e})=>e?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ico-minimize-2"}),a.jsx("span",{className:"visually-hidden",children:"expandRow"})]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ico-plus-1"}),a.jsx("span",{className:"visually-hidden",children:"expandRow"})]}),expandColumnRenderer:({expanded:e})=>e?a.jsx("i",{className:"ico-minimize-2"}):a.jsx("i",{className:"ico-plus-1"}),renderer:e=>a.jsx(a.Fragment,{children:a.jsx("div",{className:"expandContent",children:a.jsx("div",{className:"detail-content",children:a.jsx("ul",{children:e?.allergyReactionDTOList?.map((l,r)=>a.jsxs("li",{children:[a.jsx("div",{className:"detail"}),a.jsx("div",{className:"detail detail-main",children:a.jsxs("fieldset",{children:[a.jsx("legend",{children:a.jsx("span",{className:"label label-primary",children:s(l?.substance)})}),a.jsx("div",{className:"p-2 position-relative",children:a.jsxs(d,{className:"InformationCard",children:[a.jsx(n,{lg:6,children:a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{children:B("allergy.exposure-route")}),a.jsx("div",{className:"exposureRoute",children:s(l?.exposureRoute)})]})}),a.jsx(n,{lg:6,children:a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{children:B("allergy.manifestation")}),a.jsx("div",{children:a.jsx("ul",{className:"manifestationListItem",children:l?.manifestationList?.map((e,t)=>a.jsx("li",{children:s(e?.display)},t))})})]})}),a.jsx(n,{lg:6,children:a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{children:B("allergy.recorder-organization")}),a.jsx("div",{children:s(e?.performingOrgName)})]})}),a.jsx(n,{lg:6,children:a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{children:B("allergy.recorded-date")}),a.jsx("div",{children:s(t(l?.onset,"DD/MMM/YYYY"))})]})}),a.jsx(n,{lg:12,children:a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{children:B("allergy.description")}),a.jsx("div",{children:s(l?.description)})]})})]})})]})})]},r))})})})})},TableColumns:[{dataField:"name",text:B("allergy.subtance-name"),classes:(e,a,t,s)=>"inactive"===(a.status||"").toLowerCase()?"border-0 align-middle fs-0 isDisabledText":"border-0 align-middle fs-0",headerClasses:"border-0",sort:!0,formatter:(e,a)=>s(e)},{dataField:"criticality",text:B("allergy.criticality"),classes:(e,a,t,s)=>"inactive"===(a.status||"").toLowerCase()?"border-0 align-middle fs-0 isDisabledText padding-0 badgeCol":"border-0 align-middle fs-0  padding-0 badgeCol",headerClasses:"border-0",sort:!0,formatter:(e,a)=>s(l(e,a?.status)),filterValue:e=>e},{dataField:"recordedDate",text:B("allergy.recorded-date"),classes:(e,a,t,s)=>"inactive"===(a.status||"").toLowerCase()?"border-0 align-middle fs-0 isDisabledText":"border-0 align-middle fs-0",headerClasses:"border-0 numericSort",sort:!0,formatter:e=>s(t(e,"DD/MMM/YYYY")),filterValue:(e,a)=>s(t(e,"DD/MMM/YYYY"))},{dataField:"",text:B("button.details"),headerClasses:"border-0",classes:"border-0 align-middle IconCol",formatter:(e,t)=>a.jsx(i,{label:B("button.view"),position:"top",children:a.jsx("i",{className:"ico-show-1 cursor",onClick:()=>(e=>{L(e),_(!0)})(t)})})}]};return a.jsxs("div",{className:"allergies-intolerance-card",children:[a.jsx(c,{ReLoadList:y,setReLoadList:C,StaticDataListItem:A}),F&&a.jsx(r,{modal:F,modaltitleText:B("allergy.reaction-header"),modalWidth:"65%",toggle:()=>_(!1),component:a.jsx(u,{allergy:v})})]})};export{p as default};
