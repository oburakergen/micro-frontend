import{u as e,c as a,g as t,b9 as s,j as r,v as l,l as i,R as n,C as o,B as c}from"./common-DEUjWhYV.js";import{t as d}from"./tigaHealthPhr__loadShare__react__loadShare__-PlbDaU_c.js";import{D as m}from"./index.modern-DlizPJF-.js";import{O as u}from"./observation-api-DOIGADGD.js";import{P as f}from"./partial-vitals-card-p6WXWyIj.js";import"./tigaHealthPhr__mf_v__runtimeInit__mf_v__-DESDpvoH.js";import"./_commonjsHelpers-Dvrxj_Zk.js";import"./preload-helper-Cyd4LpGB.js";import"./index.modern-BcxX8faq.js";import"./Overlay-CK6O43qj.js";const v=()=>{const[v,p]=d.useState([]),[g,h]=d.useState([]),[b,j]=d.useState([]),[x,S]=d.useState({type:!1,label:null}),[C,y]=d.useState(!1),[_,N]=d.useState({Id:"",Name:""}),{t:R}=e(),[D,P]=d.useState(!1),V=a(e=>e.roleManageStore.PatientPhysical);d.useEffect(()=>{x?.type&&P(!0)},[x]),d.useEffect(()=>{L()},[]);const F=["8867-4","2708-6","85354-9","2339-0","8302-2","29463-7"],L=()=>{u.dashboard(e=>{if(Object.keys(e||[]).length<6){const a=[];Object.values(e||[]).forEach(e=>{if(F.includes(e.code)){const a=F.indexOf(e.code);F.splice(a,1)}}),F.forEach(e=>a.push({code:e})),Object.values(e||[]).forEach(e=>a.push(e)),p(a)}else e&&p(e)})},B={DataApi:u,DataCustom:"getList",DataGetParams:{vitalSignsCode:x?.type?x?.type:void 0},CustomPage:!0,SearchBox:!1,DataState:Array.isArray(g)?g:[],DataSetState:h,DataContentState:Array.isArray(b)?b:[],DataContentSetState:j,deleteIDName:_,TableKeyField:"id",filterSearchInput:!1,filterSearchPlaceholder:"Search",deleteComponent:null,detailComponent:null,detailColumnName:null,filterComponent:null,FilterSelectState:C,FilterSelectSetState:y,cardClass:"CardCreate DataHeaderNone",cardLight:!1,cardTitle:"",PermissionPage:"vital-signs",newButton:!1,excelButton:!1,filterButton:!1,TableColumns:[{dataField:"display",text:R("vital-sign.label-display"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1},{dataField:"effective.value",text:R("vital-sign.label-date"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1,formatter:(e,a)=>t(a?.effective?.value,"DD/MMM/YYYY HH:mm")},{dataField:"",text:R("vital-sign.label-value"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1,formatter:(e,a)=>a?.observationValue?s({...a?.observationValue,label:""},a.code):a?.components?.length>0&&a.components.reverse().map(e=>s({...e?.observationValue,label:e?.display},a.code)),filterValue:(e,a)=>a?.observationValue?s({...a?.observationValue,label:a?.display},a.code):a?.components?.length>0&&a.components.reverse().map(e=>s({...e?.observationValue,label:e?.display},a.code))},{dataField:"referenceRange",text:R("vital-sign.label-range"),classes:"border-0 align-middle",headerClasses:"border-0",sort:!1,formatter:(e,a)=>{const t=a?.components;let s,l;return t&&t.length>0&&(l=t.reduce((e,a)=>Number(a?.observationValue?.value)<Number(e?.observationValue?.value)?a:e,t[0]),s=t.reduce((e,a)=>Number(a?.observationValue?.value)>Number(e?.observationValue?.value)?a:e,t[0])),"85354-9"===a?.code?"-"===a?.referenceRange?a?.referenceRange:r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"referenceRangeBloodPressure",children:`${s?.referenceRange?.low} - ${s?.referenceRange?.high}`}),r.jsx("br",{}),r.jsx("span",{className:"referenceRangeBloodPressure",children:`${l?.referenceRange?.low} - ${l?.referenceRange?.high}`})]}):"29463-7"===a?.code||"8302-2"===a?.code?"-":`${a?.referenceRange?.low} - ${a?.referenceRange?.high}`}}]};return r.jsx(l,{cardClass:null,cardLight:!1,cardHeader:x?.type&&r.jsx(c,{variant:"falcon-default",onClick:()=>{S({type:null,label:null}),P(!0)},size:"sm",children:R("button.view-all")}),cardTitle:R("observation.vital-signs-info"),cardContent:r.jsxs("div",{className:"SearchBox vitalsCard",children:[r.jsxs(d.Fragment,{children:[r.jsx(i,{alertType:"info",alertText:r.jsxs("p",{className:"mb-0 marginRight20",children:[r.jsx("i",{className:"ico-info"})," ",` ${R("vital-sign.info-filter")}`]})}),r.jsx(n,{className:"mt-3",style:{marginLeft:"0"},children:Object.values(v||{}).map((e,a)=>r.jsx(o,{lg:2,className:"main-vital-signs-part",children:r.jsx(f,{idx:a,item:e,activeCard:x,setActiveCard:S,activeClass:"active",inactiveClass:"soft"})},a))})]}),V&&r.jsx(m,{ReLoadList:D,setReLoadList:P,DynamicDataListItem:B})]})})};export{v as default};
